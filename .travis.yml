dist: trusty
sudo: false
language: rust
cache: cargo
rust: # for allow_failures
matrix:
  include:
    - rust: stable
      before_script: cargo install rustfmt --force
      script: cargo fmt --all -- --write-mode diff --force && cargo build --all && cargo test --all
    - rust: beta
      script: cargo build --all && cargo test --all
    - name: "web"
      rust: nightly
      script: cargo web build
    - rust: nightly
      script: cargo build --all && cargo test --all
  allow_failures:
    - rust: nightly
  fast_finish: true